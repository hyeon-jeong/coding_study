import sys

N, M = map(int, sys.stdin.readline()[:-1].split())

Area = [[0]*M for i in range(N)]

for i in range(N):
    Area[i] = list(map(int, sys.stdin.readline()[:-1].split()))

poly = [[(0, 0), (1, 0), (2, 0), (3, 0)],
        [(0, 0), (0, 1), (0, 2), (0, 3)],
        [(0, 0), (1, 0), (0, 1), (1, 1)],
        [(0, 0), (0, 1), (0, 2), (1, 2)],
        [(0, 0), (1, 0), (1, 1), (1, 2)],
        [(1, 0), (1, 1), (1, 2), (0, 2)],
        [(0, 0), (1, 0), (0, 1), (0, 2)],
        [(0, 0), (1, 0), (2, 0), (2, 1)],
        [(0, 1), (1, 1), (2, 1), (2, 0)],
        [(0, 0), (0, 1), (1, 1), (2, 1)],
        [(0, 0), (0, 1), (1, 0), (2, 0)],
        [(0, 0), (0, 1), (1, 1), (1, 2)],
        [(1, 0), (1, 1), (0, 1), (0, 2)],
        [(0, 1), (1, 1), (1, 0), (2, 0)],
        [(0, 0), (1, 0), (1, 1), (2, 1)],
        [(0, 0), (1, 0), (2, 0), (1, 1)],
        [(1, 0), (0, 1), (1, 1), (2, 1)],
        [(0, 0), (0, 1), (1, 1), (0, 2)],
        [(1, 0), (1, 1), (0, 1), (1, 2)]]


max_sum = 0

for i in range(N):
    for j in range(M):
        for p in poly:
            i1, j1 = i+p[0][0], j+p[0][1] 
            i2, j2 = i+p[1][0], j+p[1][1] 
            i3, j3 = i+p[2][0], j+p[2][1] 
            i4, j4 = i+p[3][0], j+p[3][1]
            if max(i1, i2, i3, i4) < N and max(j1, j2, j3, j4) < M:
                max_sum = max(Area[i1][j1]+Area[i2][j2]+Area[i3][j3]+Area[i4][j4], max_sum)

print(max_sum)

